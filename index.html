<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>JEE Mains — NTA-style Mock Test</title>
<style>
  :root{
    --nta-orange: #f97316;
    --bg: #f3f4f6;
    --card: #ffffff;
    --muted: #6b7280;
    --green: #10b981;
    --red: #ef4444;
    --shadow: 0 6px 18px rgba(15,23,42,0.06);
    --palette-grey: #f8fafc;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;color:#111;background:var(--bg)}
  header{background:var(--nta-orange);color:#fff;padding:12px 18px;display:flex;align-items:center;justify-content:space-between;gap:12px}
  .brand{display:flex;align-items:center;gap:12px}
  .brand h1{font-size:18px;margin:0;font-weight:700}
  .top-info{display:flex;gap:18px;align-items:center}
  .chip{background:rgba(255,255,255,0.15);padding:6px 10px;border-radius:8px;font-size:14px}
  .container{max-width:1150px;margin:18px auto;padding:0 12px}
  .exam-grid{display:grid;grid-template-columns:1fr 320px;gap:16px}
  .left, .right{background:var(--card);padding:14px;border-radius:10px;box-shadow:var(--shadow)}
  .left{min-height:640px;display:flex;flex-direction:column}
  .topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
  .tabs{display:flex;gap:8px}
  .tab{background:#fff;border:1px solid #e6e7ee;padding:8px 10px;border-radius:6px;cursor:pointer}
  .tab.active{background:var(--nta-orange);color:#fff;border-color:var(--nta-orange)}
  .question-area{flex:1;overflow:auto;padding:6px;border-radius:8px;background:linear-gradient(180deg,#fff,#fbfbfb);}
  .qno{font-weight:700;margin-bottom:8px}
  .qtext{margin-bottom:12px}
  .options{display:flex;flex-direction:column;gap:8px}
  .option{display:flex;gap:10px;align-items:flex-start;padding:10px;border-radius:8px;border:1px solid #eef2ff;cursor:pointer;background:#fff}
  .option.selected{border-color:var(--nta-orange);box-shadow:0 4px 10px rgba(11,99,214,0.06);background:#fffaf0}
  .controls{display:flex;justify-content:space-between;gap:8px;margin-top:12px;align-items:center}
  .controls .left-controls{display:flex;gap:8px}
  button.btn{padding:9px 12px;border-radius:8px;border:0;cursor:pointer;font-weight:600}
  .btn.primary{background:var(--nta-orange);color:#fff}
  .btn.ghost{background:#fff;border:1px solid #e6e7ee;color:var(--muted)}
  .btn.warn{background:#fff3e0;border:1px solid #ffd7a6;color:#92400e}
  .small{font-size:13px;color:var(--muted)}
  /* palette */
  .palette-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:8px}
  .pal-btn{padding:10px;border-radius:6px;border:1px solid #e6e7ee;background:var(--palette-grey);cursor:pointer;text-align:center}
  .pal-btn.notvisited{background:#fff}
  .pal-btn.answered{background:#ecfccb;border-color:#bbf7d0} /* green-ish */
  .pal-btn.review{background:#fff7ed;border-color:#ffd1a4} /* orange-ish */
  .pal-legend{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
  .legend-item{display:flex;gap:6px;align-items:center;font-size:13px}
  .legend-box{width:14px;height:14px;border-radius:3px}
  /* responsive */
  @media(max-width:980px){.exam-grid{grid-template-columns:1fr}.right{order:2}.left{order:1}header{flex-direction:column;align-items:flex-start;gap:8px}}
</style>
</head>
<body>
<header>
  <div class="brand">
    <svg width="36" height="36" viewBox="0 0 24 24" fill="none" style="background:#fff;border-radius:6px;padding:4px">
      <path d="M3 12h18" stroke="#f97316" stroke-width="2" stroke-linecap="round"/>
      <path d="M12 3v18" stroke="#f97316" stroke-width="2" stroke-linecap="round"/>
    </svg>
    <div>
      <h1>JEE Mains — Mock Test (NTA-style)</h1>
      <div style="font-size:13px;opacity:0.95">Full-length mock — 25 Q per subject</div>
    </div>
  </div>

  <div class="top-info">
    <div class="chip">Candidate: <strong id="candName">Guest</strong></div>
    <div class="chip">Test: <strong id="testTitle">Custom Mock</strong></div>
    <div class="chip">Time Left: <strong id="timer">03:00:00</strong></div>
  </div>
</header>

<div class="container">
  <div class="exam-grid">
    <div class="left">
      <div class="topbar">
        <div class="tabs" id="sectionTabs"></div>
        <div class="small">Question <span id="qIndex">1</span>/<span id="qTotal">75</span></div>
      </div>

      <div class="question-area" id="questionArea">
        <!-- question injected here -->
      </div>

      <div class="controls">
        <div class="left-controls">
          <button class="btn ghost" id="clearBtn">Clear Response</button>
          <button class="btn warn" id="markBtn">Mark for Review & Next</button>
        </div>
        <div>
          <button class="btn ghost" id="prevBtn">Previous</button>
          <button class="btn primary" id="saveNextBtn">Save & Next</button>
          <button class="btn primary" id="submitBtn">Submit</button>
        </div>
      </div>
    </div>

    <div class="right">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
        <div><strong>Question Palette</strong></div>
        <div class="small">Auto-save: <strong id="autoSave">ON</strong></div>
      </div>

      <div id="palette" class="palette-grid"></div>

      <div class="pal-legend">
        <div class="legend-item"><div class="legend-box" style="background:#fff;border:1px solid #e6e7ee"></div>Not Visited</div>
        <div class="legend-item"><div class="legend-box" style="background:#ecfccb"></div>Answered</div>
        <div class="legend-item"><div class="legend-box" style="background:#fff7ed"></div>Marked for Review</div>
      </div>

      <hr style="margin:12px 0">

      <div style="font-size:13px;color:var(--muted)">
        <div><strong>Sections</strong></div>
        <ul id="sectionSummary" class="small" style="padding-left:16px;margin-top:8px"></ul>
      </div>
    </div>
  </div>
</div>

<script>
// Configuration: 25 questions per subject (Physics, Chemistry, Maths)
const config = {
  candidateName: 'Guest User',
  testTitle: 'Custom JEE Mock — NTA-style',
  totalDurationMin: 180,
  sections: [
    { id:'physics', title:'Physics', questions: Array.from({length:25}, (_,i)=>({ id:`p${i+1}`, text:`Physics Q${i+1}: [Replace with real question]`, type:'mcq', options:['Option A','Option B','Option C','Option D'], answer:0 })) },
    { id:'chemistry', title:'Chemistry', questions: Array.from({length:25}, (_,i)=>({ id:`c${i+1}`, text:`Chemistry Q${i+1}: [Replace with real question]`, type:'mcq', options:['Option A','Option B','Option C','Option D'], answer:0 })) },
    { id:'maths', title:'Mathematics', questions: Array.from({length:25}, (_,i)=>({ id:`m${i+1}`, text:`Maths Q${i+1}: [Replace with real question]`, type:'mcq', options:['Option A','Option B','Option C','Option D'], answer:0 })) }
  ]
};

// State
const state = {
  currentSectionIndex: 0,
  currentQuestionIndex: 0,
  answers: {}, // qid -> {value, marked}
  startTime: null,
  durationSec: config.totalDurationMin * 60,
  timerInterval: null
};

// Utilities
const $ = sel => document.querySelector(sel);
const formatTime = sec => {
  if(sec<0) sec=0;
  const h=Math.floor(sec/3600), m=Math.floor((sec%3600)/60), s=sec%60;
  return `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
};

// Init
function init(){
  $('#candName').innerText = config.candidateName;
  $('#testTitle').innerText = config.testTitle;
  $('#qTotal').innerText = config.sections.reduce((acc,s)=>acc+s.questions.length,0);
  buildSectionTabs();
  loadState();
  renderQuestion();
  buildPalette();
  updateSectionSummary();
  startTimer();
  // hooks
  $('#saveNextBtn').addEventListener('click', ()=>{ saveAnswer(); gotoNext(); });
  $('#prevBtn').addEventListener('click', ()=>{ saveAnswer(); gotoPrev(); });
  $('#clearBtn').addEventListener('click', clearResponse);
  $('#markBtn').addEventListener('click', ()=>{ markForReviewAndNext(); });
  $('#submitBtn').addEventListener('click', submitPaper);
}

// Build section tabs
function buildSectionTabs(){
  const el = $('#sectionTabs'); el.innerHTML='';
  config.sections.forEach((s,i)=>{
    const b = document.createElement('button');
    b.className = 'tab' + (i===state.currentSectionIndex? ' active':'');
    b.innerText = s.title;
    b.addEventListener('click', ()=>{ state.currentSectionIndex=i; state.currentQuestionIndex=0; renderQuestion(); buildPalette(); updateSectionSummary(); buildSectionTabs(); });
    el.appendChild(b);
  });
}

// Render question
function renderQuestion(){
  const sec = config.sections[state.currentSectionIndex];
  const q = sec.questions[state.currentQuestionIndex];
  $('#qIndex').innerText = getGlobalQuestionNumber();
  const area = $('#questionArea'); area.innerHTML='';
  const qno = document.createElement('div'); qno.className='qno'; qno.innerText = `${sec.title} — Q${state.currentQuestionIndex+1}`;
  const qtext = document.createElement('div'); qtext.className='qtext'; qtext.innerHTML = q.text;

  const opts = document.createElement('div'); opts.className='options';
  if(q.type==='mcq'){
    q.options.forEach((opt, idx)=>{
      const o = document.createElement('div'); o.className='option'; o.tabIndex=0;
      o.innerHTML = `<div style="min-width:22px"><strong>${String.fromCharCode(65+idx)}</strong></div><div style="flex:1">${opt}</div>`;
      o.addEventListener('click', ()=>{ selectOption(q.id, idx); });
      o.addEventListener('keydown', (e)=>{ if(e.key==='Enter') selectOption(q.id, idx); });
      opts.appendChild(o);
    });
  } else {
    const input = document.createElement('input'); input.type='text'; input.placeholder='Numeric answer'; input.style.padding='10px'; input.style.border='1px solid #e6e7ee'; input.style.borderRadius='6px'; input.style.width='100%';
    input.addEventListener('input', ()=>{ state.answers[q.id] = state.answers[q.id]||{}; state.answers[q.id].value = input.value; saveState(); updatePaletteButton(q.id); updateSectionSummary(); });
    opts.appendChild(input);
    const prev = state.answers[q.id] && state.answers[q.id].value; if(prev) input.value = prev;
  }

  area.appendChild(qno); area.appendChild(qtext); area.appendChild(opts);
  reflectSelection(q);
}

// helper global q number
function getGlobalQuestionNumber(){
  let n=0;
  for(let i=0;i<state.currentSectionIndex;i++) n+=config.sections[i].questions.length;
  return n + state.currentQuestionIndex + 1;
}

// selection handling
function selectOption(qid, idx){
  state.answers[qid] = state.answers[qid]||{};
  state.answers[qid].value = idx;
  state.answers[qid].marked = false;
  saveState();
  reflectSelectionById(qid);
  updatePaletteButton(qid);
  updateSectionSummary();
}

function reflectSelection(q){
  if(q.type!=='mcq') return;
  const nodes = document.querySelectorAll('.option');
  nodes.forEach((node, idx)=>{
    node.classList.remove('selected');
    const stored = state.answers[q.id] && state.answers[q.id].value;
    if(stored!==undefined && parseInt(stored)===idx) node.classList.add('selected');
  });
}
function reflectSelectionById(qid){
  // if currently visible question matches qid, reflect selection
  const sec = config.sections[state.currentSectionIndex];
  const q = sec.questions[state.currentQuestionIndex];
  if(q.id===qid) reflectSelection(q);
}

// navigation
function gotoNext(){
  const sec=config.sections[state.currentSectionIndex];
  if(state.currentQuestionIndex < sec.questions.length-1){ state.currentQuestionIndex++; renderQuestion(); }
  else if(state.currentSectionIndex < config.sections.length-1){ state.currentSectionIndex++; state.currentQuestionIndex=0; buildSectionTabs(); renderQuestion(); buildPalette(); }
  else{ alert('This is the last question'); }
}
function gotoPrev(){
  if(state.currentQuestionIndex>0){ state.currentQuestionIndex--; renderQuestion(); }
  else if(state.currentSectionIndex>0){ state.currentSectionIndex--; const s=config.sections[state.currentSectionIndex]; state.currentQuestionIndex = s.questions.length-1; buildSectionTabs(); renderQuestion(); buildPalette(); }
  else{ alert('This is the first question'); }
}

// clear & mark
function clearResponse(){
  const q = getCurrentQuestion();
  if(!q) return;
  delete state.answers[q.id];
  saveState();
  renderQuestion();
  updatePaletteButton(q.id);
  updateSectionSummary();
}
function markForReviewAndNext(){
  const q = getCurrentQuestion();
  if(!q) return;
  state.answers[q.id] = state.answers[q.id] || {};
  state.answers[q.id].marked = true;
  saveState();
  updatePaletteButton(q.id);
  updateSectionSummary();
  gotoNext();
}

// current question helper
function getCurrentQuestion(){ return config.sections[state.currentSectionIndex].questions[state.currentQuestionIndex]; }

// Palette
function buildPalette(){
  const sec = config.sections[state.currentSectionIndex];
  const pal = $('#palette'); pal.innerHTML='';
  sec.questions.forEach((q, idx)=>{
    const b = document.createElement('button'); b.className='pal-btn notvisited'; b.id = 'pal-'+q.id; b.innerText = idx+1;
    b.addEventListener('click', ()=>{ state.currentQuestionIndex = idx; renderQuestion(); updatePaletteSelection(idx); });
    pal.appendChild(b);
    updatePaletteButton(q.id);
  });
  updatePaletteSelection(state.currentQuestionIndex);
}

function updatePaletteButton(qid){
  const btn = document.getElementById('pal-'+qid);
  if(!btn) return;
  btn.className='pal-btn';
  const entry = state.answers[qid];
  if(!entry) btn.classList.add('notvisited');
  else if(entry.marked) btn.classList.add('review');
  else if(entry.value!==undefined && entry.value!=='') btn.classList.add('answered');
  else btn.classList.add('notvisited');
}

function updatePaletteSelection(idx){
  document.querySelectorAll('.pal-btn').forEach((b,i)=>{ b.style.outline = i===idx? '2px solid rgba(0,0,0,0.08)':'none'; });
}

// Section summary
function updateSectionSummary(){
  const ul = $('#sectionSummary'); ul.innerHTML='';
  config.sections.forEach((s,i)=>{
    const answered = s.questions.filter(q=> state.answers[q.id] && state.answers[q.id].value!==undefined ).length;
    const marked = s.questions.filter(q=> state.answers[q.id] && state.answers[q.id].marked).length;
    const li = document.createElement('li'); li.innerText = `${s.title}: ${answered}/${s.questions.length} answered, ${marked} marked`;
    ul.appendChild(li);
  });
}

// Timer & persistence
function startTimer(){
  if(!state.startTime) state.startTime = Date.now();
  const end = state.startTime + state.durationSec*1000;
  state.timerInterval = setInterval(()=>{
    const left = Math.round((end - Date.now())/1000);
    $('#timer').innerText = formatTime(left);
    if(left<=0){ clearInterval(state.timerInterval); autoSubmit(); }
  },500);
}

function autoSubmit(){ alert('Time is up! Auto-submitting...'); submitPaper(true); }

// Save/load
function saveState(){
  try{
    const payload = {state:{answers: state.answers, startTime: state.startTime, currentSectionIndex: state.currentSectionIndex, currentQuestionIndex: state.currentQuestionIndex}, config};
    localStorage.setItem('jee_mock_state', JSON.stringify(payload));
    $('#autoSave').innerText='ON';
  } catch(e){ $('#autoSave').innerText='OFF'; }
}
function loadState(){
  try{
    const raw = localStorage.getItem('jee_mock_state'); if(!raw) return;
    const payload = JSON.parse(raw);
    if(payload.state){ state.answers = payload.state.answers || {}; state.startTime = payload.state.startTime || Date.now(); state.currentSectionIndex = payload.state.currentSectionIndex||0; state.currentQuestionIndex = payload.state.currentQuestionIndex||0; }
  } catch(e){ console.warn('No saved state'); }
}

// score & submit
function submitPaper(isAuto=false){
  if(!isAuto){
    if(!confirm('Submit test? You will not be able to change answers.')) return;
  }
  // scoring: 1 mark per correct (demo answers are 0 for all so score will be number of 0 selections)
  let total=0, attempted=0, correct=0;
  const details = [];
  config.sections.forEach(sec=>{ sec.questions.forEach(q=>{
    total++;
    const entry = state.answers[q.id];
    if(entry && entry.value!==undefined && entry.value!=='') attempted++;
    let isCorrect=false;
    if(q.type==='mcq'){
      if(entry && parseInt(entry.value) === q.answer) { correct++; isCorrect=true; }
    } else {
      if(entry && entry.value!==undefined){
        const a = parseFloat(entry.value), b = parseFloat(q.answer);
        if(!isNaN(a) && !isNaN(b) && Math.abs(a-b) <= Math.max(0.001, Math.abs(b)*0.001)){ correct++; isCorrect=true; }
      }
    }
    details.push({id:q.id, text:q.text, your: entry?entry.value:null, correct:isCorrect, solution:q.solution||''});
  })});
  // show results (replace left panel)
  const left = document.querySelector('.left');
  left.innerHTML = '';
  const resDiv = document.createElement('div'); resDiv.style.padding='14px';
  resDiv.innerHTML = `<h2>Result</h2><p class="small">Total: ${total} | Attempted: ${attempted} | Correct: ${correct} | Score: ${correct} (1 mark each; demo no negative)</p>`;
  const det = document.createElement('details'); det.innerHTML = '<summary>Detailed</summary><div></div>'; const wrap = det.querySelector('div');
  details.forEach((d,i)=>{ const e=document.createElement('div'); e.style.borderTop='1px dashed #e6e7ee'; e.style.padding='8px 0'; e.innerHTML = `<div><strong>Q${i+1}:</strong> ${d.text}</div><div class="small">Your: ${d.your===null?'<em>Not answered</em>':d.your} | ${d.correct?'<span style="color:green">Correct</span>':'<span style="color:red">Incorrect</span>'}</div><div class="small">Solution: ${d.solution||'No solution provided'}</div>`; wrap.appendChild(e); });
  resDiv.appendChild(det); left.appendChild(resDiv);
  clearInterval(state.timerInterval);
  // optionally clear saved state
  // localStorage.removeItem('jee_mock_state');
}

// helpers: when moving between sections update palette & question
function updateAfterNavigation(){
  renderQuestion(); buildPalette(); updateSectionSummary();
}

// event: on visibility change save
window.addEventListener('beforeunload', saveState);

// init
init();
</script>
</body>
</html>